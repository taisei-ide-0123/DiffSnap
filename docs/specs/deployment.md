# DiffSnap デプロイとリリース

**対象**: AIコーディングエージェント
**参照元**: SPEC.md セクション9

---

## 9. デプロイとリリース

### 9.1 ビルドプロセス

```
ビルドステップ:

1. 環境チェック
   - Node.js 20+
   - pnpm 8+

2. 依存関係インストール
   pnpm install --frozen-lockfile

3. Lint & Format
   pnpm lint
   pnpm format --check

4. 単体テスト
   pnpm test

5. TypeScript型チェック
   pnpm tsc --noEmit

6. ビルド
   pnpm build
   - 出力: dist/
   - マニフェスト検証
   - アイコン確認

7. E2Eテスト
   pnpm test:e2e

8. ZIP生成
   pnpm zip
   - 出力: diffsnap-v1.0.0.zip
```

### 9.2 Chrome Web Store公開

#### 9.2.1 ストア情報

```
必須情報:

1. 基本情報
   - 名前: DiffSnap
   - 説明（短）: Collect page images with smart diff tracking (132文字)
   - 説明（詳細）: 1000文字以内
   - カテゴリ: Productivity
   - 言語: English

2. ビジュアル
   - アイコン: 128x128px PNG（透過）
   - スクリーンショット: 1280x800px × 5枚
   - プロモタイル: 440x280px（任意）
   - 動画: YouTube URL（30秒デモ）

3. プライバシー
   - プライバシーポリシーURL
   - 権限の正当性説明
   - データ収集の有無

4. サポート
   - サポートURL
   - ウェブサイトURL
```

#### 9.2.2 審査対策

```
審査通過ポイント:

1. 権限説明
   - 各権限の具体的用途を明記
   - activeTabの必要性
   - storageの使用目的

2. プライバシー
   - データ収集なし を明示
   - ローカル処理を強調
   - 台帳の保存場所説明

3. 機能明確化
   - 「閲覧中ページのみ」を強調
   - クローリング禁止を明記
   - 適法利用の注意喚起

4. テスト
   - デモ用アカウント提供
   - ビデオデモで全機能紹介
   - エッジケースの動作確認
```

### 9.3 バージョニング

```
セマンティックバージョニング:

形式: MAJOR.MINOR.PATCH

ルール:
- MAJOR: 互換性のない変更
- MINOR: 機能追加（後方互換）
- PATCH: バグ修正

例:
- 1.0.0: 初回リリース
- 1.1.0: Pro差分機能追加
- 1.1.1: 差分バグ修正
- 2.0.0: データモデル変更

manifest.json:
- version: "1.0.0"
- version_name: "1.0.0 (Beta)" ← ユーザー表示用
```

### 9.4 ロールバック計画

```
ロールバック手順:

トリガー:
- 重大バグ報告（クラッシュ率>5%）
- データ損失報告
- Chrome審査リジェクト

手順:
1. 新バージョンを非公開化
2. 前バージョンを再公開
3. ユーザーへ通知（ストア説明更新）
4. GitHub で hotfix ブランチ作成
5. 修正→テスト→再リリース

データ互換性:
- マイナーバージョンは後方互換必須
- メジャーバージョンは移行スクリプト提供
```

---

